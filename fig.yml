zookeeper:
  image: wurstmeister/zookeeper
  ports: 
    - "2181:2181"
kafka:
  image: wurstmeister/kafka:0.8.1.1-1
  ports:
    - "9092"
  links: 
    - zookeeper:zk
  environment:
    KAFKA_ADVERTISED_HOST_NAME: kafka
    KAFKA_ADVERTISED_PORT: 9092
  volumes:
    - /var/run/docker.sock:/var/run/docker.sock
elasticsearch:
  image: dockerfile/elasticsearch:latest
  ports: 
    - "9200"
    - "9300"
  volumes:
    - /data
mongodb:
  image: raintank/mongodb
  ports:
    - "27017:27017"
influxdb:
  image: raintank/influxdb
  ports:
    - "8083"
    - "8086"
    - "2003"
graphiteApi:
  image: raintank/graphite-api
  ports:
    - "8888"
  links:
    - mongodb:mongodb
    - influxdb:influxdb
  environment:
    GRAPHITE_influxdb_host: influxdb
raintankApi:
  image: raintank/api
  ports:
    - "4000"
  links:
    - zookeeper:zk
    - graphiteApi:graphite-api
    - mongodb:mongodb
    - elasticsearch:elasticsearch
    - kafka:kafka
    - influxdb:influxdb
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
  environment:
    RAINTANK_siteUrl:
raintankLocationMgr:
  image: raintank/location-mgr
  links:
    - zookeeper:zk
    - kafka:kafka
    - mongodb:mongodb
  ports:
    - "8181:8181"
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
raintankTask:
  image: raintank/task
  links:
    - zookeeper:zk
    - kafka:kafka
    - mongodb:mongodb
    - graphiteApi:graphite-api
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
raintankEvent:
  image: raintank/event
  links:
    - zookeeper:zk
    - kafka:kafka
    - mongodb:mongodb
    - elasticsearch:elasticsearch
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
raintankDispatcher:
  image: raintank/dispatcher
  links:
    - zookeeper:zk
    - kafka:kafka
    - mongodb:mongodb
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
raintankMetric:
  image: raintank/metric
  links:
    - zookeeper:zk
    - kafka:kafka
    - mongodb:mongodb
    - influxdb:influxdb
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
raintankProxy:
  image: raintank/proxy
  ports:
    - "80:80"
  links:
    - raintankApi:raintank-api
    - graphiteApi:graphite-api
raintankCollector:
  image: raintank/collector
  links:
    - raintankLocationMgr:raintank-locationmgr
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank

