elasticsearch:
  image: dockerfile/elasticsearch:latest
  ports: 
    - "9200"
    - "9300"
  volumes:
    - /data
mongodb:
  image: raintank/mongodb
  ports:
    - "27017:27017"
influxdb:
  image: raintank/influxdb
  ports:
    - "8083"
    - "8086"
    - "2003"
graphiteApi:
  image: raintank/graphite-api
  ports:
    - "8888"
  links:
    - mongodb:mongodb
    - influxdb:influxdb
  environment:
    GRAPHITE_influxdb_host: influxdb
raintankBroker:
  image: raintank/broker
  ports:
    - "9997"
    - "9998"
    - "9999"
raintankApi:
  image: raintank/api
  ports:
    - "4000"
  links:
    - raintankBroker:broker
    - graphiteApi:graphite-api
    - mongodb:mongodb
    - elasticsearch:elasticsearch
    - influxdb:influxdb
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
  environment:
    RAINTANK_siteUrl:
raintankLocationMgr:
  image: raintank/location-mgr
  links:
    - raintankBroker:broker
    - mongodb:mongodb
  ports:
    - "8181:8181"
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
raintankTask:
  image: raintank/task
  links:
    - raintankBroker:broker
    - mongodb:mongodb
    - graphiteApi:graphite-api
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
raintankEvent:
  image: raintank/event
  links:
    - raintankBroker:broker
    - mongodb:mongodb
    - elasticsearch:elasticsearch
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
raintankDispatcher:
  image: raintank/dispatcher
  links:
    - raintankBroker:broker
    - mongodb:mongodb
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
raintankMetric:
  image: raintank/metric
  links:
    - raintankBroker:broker
    - mongodb:mongodb
    - influxdb:influxdb
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank
raintankProxy:
  image: raintank/proxy
  ports:
    - "80:80"
  links:
    - raintankApi:raintank-api
    - graphiteApi:graphite-api
raintankCollector:
  image: raintank/collector
  links:
    - raintankLocationMgr:raintank-locationmgr
  volumes:
    - /var/docker/raintank/logs:/var/log/raintank

